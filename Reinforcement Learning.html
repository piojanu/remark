<!DOCTYPE html>
<html>
  <head>
    <title>Gradient</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" href="Machinery/fonts/UbuntuMono/UbuntuMono.css">
    <link rel="stylesheet" href="Machinery/fonts/BioRhyme/BioRhyme.css">
    <link rel="stylesheet" href="Machinery/fonts/Raleway/Raleway.css">
    <link rel="stylesheet" href="Machinery/style.css">
  </head>
  <body>
    <textarea id="source">
    </textarea>
    <script src="Machinery/libs/remark.min.js"></script>
    <script src="Machinery/libs/katex.min.js"></script>
    <script src="Machinery/libs/auto-render.min.js"></script>
    <link rel="stylesheet" href="Machinery/libs/katex.min.css">
    <script type="text/javascript">
	  // Prepare markdown file name
	  var fileName = location.pathname.split("/").pop().split(".")[0] + ".md";
	  
	  // Get markdown content
	  var xhr= new XMLHttpRequest();
	  xhr.open('GET', fileName);
	  xhr.onreadystatechange= function() {
        if (this.readyState!==4) return;
        if (this.status!==200) return; // or whatever error handling you want
        document.getElementById('source').innerHTML= this.responseText;

	    // Auto math rendering 
        var renderMath = function() {
          renderMathInElement(document.body);
        }

	    // Macros
        remark.macros.scale = function (percentage) {
          var url = this;
          return '<img src="' + url + '" style="width: ' + percentage + '" />';
        };
        remark.macros.super = function () {
	      var func = arguments.callee;
          if (typeof func.counter == 'undefined') {
            func.counter = 0;
          }
     	  ++func.counter;
	  
          return '<sup class="red">' + func.counter + '</sup>';
        };
        remark.macros.script = function () {
	      var func = arguments.callee;
          if (typeof func.counter == 'undefined') {
            func.counter = 0;
          }
     	  ++func.counter;
	  
          return '<sup class="red">' + func.counter + '</sup>';
        };

	    // Run remark
        var slideshow = remark.create({
	      highlightStyle: 'tomorrow-night',
          highlightLines: true
	    }, renderMath);
	  };
	  xhr.send();
	  
    </script>
  </body>
</html>
